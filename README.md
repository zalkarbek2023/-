# OCR Comparison Service

–í–µ–±-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º 4 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö OCR-–º–æ–¥–µ–ª–µ–π —Å –ø–æ—Å–∏–º–≤–æ–ª—å–Ω—ã–º –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ–º –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (PDF, PNG, JPG, JPEG, TIFF)
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ 4 OCR –º–æ–¥–µ–ª–∏
- ‚úÖ –ü–æ—Å–∏–º–≤–æ–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ HTML –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ü–≤–µ—Ç–æ–≤–æ–π –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
- ‚úÖ REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ü§ñ OCR –ú–æ–¥–µ–ª–∏

1. **PaddleOCR** (59.2k ‚≠ê) - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–∏—Ç–∞–π—Å–∫–∞—è –º–æ–¥–µ–ª—å
2. **OLMoCR** (~1.5k ‚≠ê) - AllenAI Vision Language Model (GPU/API)
3. **Marker** (29.3k ‚≠ê) - –±—ã—Å—Ç—Ä–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF (25 —Å—Ç—Ä/—Å–µ–∫)
4. **MinerU** (46.9k ‚≠ê) - –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ —Ñ–æ—Ä–º—É–ª–∞–º–∏

## üì¶ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
./run.sh

# 2. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://localhost:8000/static/index.html

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å PDF –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç –≤—Å–µ—Ö 4 –º–æ–¥–µ–ª–µ–π
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Web UI

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8000/static/index.html`

### API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

Swagger UI: `http://localhost:8000/docs`
ReDoc: `http://localhost:8000/redoc`

### –ü—Ä–∏–º–µ—Ä—ã API –∑–∞–ø—Ä–æ—Å–æ–≤

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞

```bash
curl -X POST "http://localhost:8000/api/upload" \
  -H "accept: application/json" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@document.pdf"
```

–û—Ç–≤–µ—Ç:
```json
{
  "task_id": "550e8400-e29b-41d4-a716-446655440000",
  "filename": "document.pdf",
  "message": "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω..."
}
```

#### 2. –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏

```bash
curl -X POST "http://localhost:8000/api/process/{task_id}"
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
curl -X GET "http://localhost:8000/api/status/{task_id}"
```

#### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
curl -X GET "http://localhost:8000/api/results/{task_id}"
```

#### 5. HTML –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8000/api/compare/{task_id}/html`

## üìä –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```json
{
  "task_id": "uuid",
  "filename": "document.pdf",
  "status": "completed",
  "created_at": "2025-10-22T10:30:00",
  "raw_results": [
    {
      "provider_name": "PaddleOCR",
      "text": "–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...",
      "processing_time": 1.234,
      "error": null
    }
  ],
  "comparison": [
    {
      "provider_name": "PaddleOCR",
      "segments": [...],
      "total_characters": 1000,
      "match_count": 950,
      "diff_count": 50,
      "accuracy_percent": 95.0
    }
  ],
  "statistics": [
    {
      "provider_name": "PaddleOCR",
      "total_chars": 1000,
      "differences": 50,
      "accuracy": 95.0,
      "processing_time": 1.234
    }
  ]
}
```

## üé® –¶–≤–µ—Ç–æ–≤–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞

- üü¢ **–ó–µ–ª–µ–Ω—ã–π** - –≤—Å–µ –º–æ–¥–µ–ª–∏ —Å–æ–≥–ª–∞—Å–Ω—ã (match)
- üü° **–ñ–µ–ª—Ç—ã–π** - –º–∏–Ω–æ—Ä–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è (1-2 –º–æ–¥–µ–ª–∏)
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** - –º–∞–∂–æ—Ä–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è (3+ –º–æ–¥–µ–ª–∏)

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `.env`:

```env
# –°–µ—Ä–≤–µ—Ä
APP_HOST=0.0.0.0
APP_PORT=8000

# –§–∞–π–ª—ã
MAX_FILE_SIZE=10485760  # 10MB
UPLOAD_DIR=./uploads

# OCR –º–æ–¥–µ–ª–∏ (–≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å)
ENABLE_PADDLE=true
ENABLE_MARKER=true
ENABLE_MINERU=true
ENABLE_OLM=false

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
TASK-1/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ models/          # OCR –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_provider.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ paddle_ocr.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ marker_ocr.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mineru_ocr.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ olm_ocr.py
‚îÇ   ‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alignment.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ comparison.py
‚îÇ   ‚îú‚îÄ‚îÄ api/             # API endpoints
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes.py
‚îÇ   ‚îî‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ visualizer.py
‚îú‚îÄ‚îÄ static/              # –§—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ uploads/             # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ .env                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ OCR –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –Ω–∞—Å–ª–µ–¥–Ω–∏–∫ `BaseOCRProvider`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã `initialize()` –∏ `extract_text()`
3. –î–æ–±–∞–≤–∏—Ç—å –≤ `main.py` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
4. –í–∫–ª—é—á–∏—Ç—å –≤ `.env`

## üìù –õ–∏—Ü–µ–Ω–∑–∏–∏ OCR –º–æ–¥–µ–ª–µ–π

- **PaddleOCR**: Apache 2.0
- **Marker**: Custom (<$2M revenue OK)
- **MinerU**: AGPL-3.0

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- OLM OCR —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ –∑–∞–≥–ª—É—à–∫–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è API)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10MB
- PDF –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π)
- –í –ø–∞–º—è—Ç–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ (–Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è pull requests –∏ issues!

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: –û–∫—Ç—è–±—Ä—å 2025
